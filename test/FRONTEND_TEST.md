# 前端本地测试指南

本文档说明如何在不使用 Docker 的情况下，在本地环境测试前端代码。

## 前置要求

- Node.js 18+ 
- npm 或 yarn
- 后端服务已启动（本地或远程）

## 快速开始

### 1. 安装依赖

```bash
cd frontend
npm install
```

### 2. 配置环境变量

创建 `frontend/.env.local` 文件（此文件已被 gitignore 忽略）：

```bash
# 后端 API 地址
VITE_API_BASE_URL=http://localhost:3000/api

# 或者使用远程后端
# VITE_API_BASE_URL=http://59.110.44.122:3000/api
```

### 3. 启动开发服务器

```bash
npm run dev
```

开发服务器将在 `http://localhost:5173` 启动。

### 4. 访问应用

在浏览器中打开：`http://localhost:5173`

## 测试流程

### 功能测试清单

#### 1. 用户注册测试
- [ ] 访问 `/register` 页面
- [ ] 填写注册表单（邮箱、密码）
- [ ] 提交注册
- [ ] 验证注册成功并跳转到登录页

#### 2. 用户登录测试
- [ ] 访问 `/login` 页面
- [ ] 输入已注册的邮箱和密码
- [ ] 提交登录
- [ ] 验证登录成功并跳转到首页
- [ ] 验证用户信息显示在导航栏

#### 3. 首页功能测试
- [ ] 访问 `/home` 页面
- [ ] 验证页面正常加载
- [ ] 测试搜索功能
- [ ] 测试商品分类导航
- [ ] 测试商品卡片点击

#### 4. 订单管理测试
- [ ] 访问 `/order-manage` 页面（需要管理员权限）
- [ ] 验证订单列表正常显示
- [ ] 测试搜索功能
- [ ] 测试状态筛选
- [ ] 测试支付方式筛选
- [ ] 测试时间范围筛选
- [ ] 测试分页功能
- [ ] 测试排序功能
- [ ] 测试订单详情查看
- [ ] 测试订单状态更新

#### 5. 用户中心测试
- [ ] 访问 `/user-center` 页面（需要登录）
- [ ] 验证用户信息显示
- [ ] 测试订单列表查看
- [ ] 测试订单详情查看

#### 6. API 连接测试
- [ ] 打开浏览器开发者工具（F12）
- [ ] 查看 Network 标签
- [ ] 验证 API 请求正常发送
- [ ] 验证 API 响应正常接收
- [ ] 检查是否有错误请求

## 常见问题排查

### 问题 1: API 请求失败

**症状**: 浏览器控制台显示网络错误或 CORS 错误

**解决方案**:
1. 检查后端服务是否启动
2. 检查 `VITE_API_BASE_URL` 配置是否正确
3. 检查后端 CORS 配置是否允许前端域名
4. 检查网络连接

### 问题 2: 页面空白

**症状**: 页面加载后显示空白

**解决方案**:
1. 打开浏览器开发者工具（F12）
2. 查看 Console 标签，检查是否有 JavaScript 错误
3. 查看 Network 标签，检查资源是否正常加载
4. 检查 `frontend/src/main.tsx` 是否正确导入

### 问题 3: 样式不显示

**症状**: 页面内容显示但样式丢失

**解决方案**:
1. 检查 `frontend/src/index.css` 是否正确导入
2. 检查 Tailwind CSS 配置是否正确
3. 清除浏览器缓存并刷新

### 问题 4: 路由不工作

**症状**: 点击链接后页面不跳转或显示 404

**解决方案**:
1. 检查 `frontend/src/router/index.tsx` 路由配置
2. 检查 React Router 版本是否兼容
3. 检查浏览器是否支持 History API

## 开发模式特性

### 热模块替换 (HMR)

Vite 开发服务器支持热模块替换，修改代码后会自动刷新页面，无需手动刷新。

### 源码映射

开发模式下会自动生成源码映射，方便调试。

### 错误提示

开发模式下会显示详细的错误信息，包括：
- TypeScript 类型错误
- React 组件错误
- 运行时错误

## 性能测试

### 页面加载速度

使用浏览器开发者工具的 Performance 标签测试页面加载速度。

### 资源大小

使用浏览器开发者工具的 Network 标签查看资源大小，确保资源合理。

## 浏览器兼容性测试

建议在以下浏览器中测试：

- Chrome (最新版)
- Firefox (最新版)
- Safari (最新版)
- Edge (最新版)

## 移动端测试

### 使用浏览器开发者工具

1. 打开浏览器开发者工具（F12）
2. 点击设备工具栏图标（或按 Ctrl+Shift+M）
3. 选择设备类型（iPhone、iPad、Android 等）
4. 测试响应式布局

### 使用真实设备

1. 确保开发服务器和移动设备在同一网络
2. 查找本机 IP 地址：`ipconfig` (Windows) 或 `ifconfig` (Mac/Linux)
3. 在移动设备浏览器中访问：`http://<your-ip>:5173`

## 调试技巧

### 1. 使用 React DevTools

安装 React DevTools 浏览器扩展，可以：
- 查看组件树
- 检查组件 props 和 state
- 调试组件渲染

### 2. 使用浏览器断点

在代码中添加 `debugger;` 语句，浏览器会在该处暂停执行。

### 3. 使用 console.log

在关键位置添加 `console.log` 输出调试信息。

### 4. 使用 Network 标签

查看所有网络请求，包括：
- 请求 URL
- 请求方法
- 请求头
- 响应状态
- 响应内容

## 测试脚本

参考 `test/start-frontend.sh` 脚本快速启动测试环境。

